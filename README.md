# Hệ Thống Quản Lý Ví Điện Tử (Electronic Wallet System)

## Giới thiệu dự án
Dự án này là một hệ thống quản lý ví điện tử đơn giản, được phát triển bằng C++ để phục vụ việc đăng ký tài khoản, chuyển điểm giữa các ví, và quản lý thông tin người dùng. Mục tiêu là xây dựng một hệ thống an toàn, robust, và thân thiện với người dùng, phù hợp với yêu cầu của một bài tập nhóm sinh viên.

### Mục tiêu chính:
- Quản lý người dùng với tài khoản duy nhất (`username` không sửa được).
- Mỗi ví có mã định danh riêng (`walletID`), sinh tự động, duy nhất.
- Giao dịch an toàn với OTP và log trạng thái (`PENDING`, `COMMITTED`, `FAILED`).
- Quyền admin: Xem tất cả giao dịch, chỉnh thông tin user (trừ `username`).

---

## Thành viên tham gia dự án
| Tên thành viên       | Công việc được giao                          |
|----------------------|----------------------------------------------|
| Nguyễn Phi Long   |  Quản lý tài khoản & đăng ký - đăng nhập |
| Nguyễn Xuân Biên    | Quản lý mật khẩu và bảo mật |
| Nguyễn Khắc Hoàng Anh       |  Quản lý người dùng                            |
| Kiều Duy Sơn       |  Quản lý ví điểm & giao dịch chuyển điểm           |


---

## Phân tích và đặc tả chức năng

### Yêu cầu chức năng
1. **Quản lý người dùng**:
   - Đăng ký user thường và admin (admin tạo bởi admin).
   - Kích hoạt tài khoản bằng OTP (hết hạn 24 giờ).
   - Đổi mật khẩu qua OTP, admin có mật khẩu tự sinh lần đầu.
   - Không cho phép sửa `username`.

2. **Quản lý ví**:
   - Mỗi ví có `walletID` duy nhất, sinh tự động, ẩn với user thường.
   - Hiển thị `walletID` trong log giao dịch và admin view.

3. **Giao dịch**:
   - Chuyển điểm giữa các ví (OTP xác nhận).
   - Log giao dịch: trạng thái, thời gian, `walletID`.
   - User xem lịch sử cá nhân, admin xem tất cả.

4. **Quyền admin**:
   - Xem danh sách user, chỉnh `fullName` (OTP), xem toàn bộ giao dịch.

5. **Xử lý trùng lặp**:
   - Đảm bảo `username` và `walletID` không trùng.
   - Phát hiện trùng khi khởi động, admin chọn giữ user nào, thông báo user.

6. **An toàn và robust**:
   - Backup và rollback khi crash.
   - Log lỗi trùng lặp (`duplicate_issues.txt`).

### Phân tích
- 1. Tổng quan
Hệ thống quản lý ví điện tử này được phát triển bằng ngôn ngữ lập trình C++ với mục tiêu mô phỏng quy trình tạo tài khoản, xác thực, quản lý điểm (ví), và thực hiện giao dịch giữa các người dùng. Dự án phục vụ yêu cầu học tập và được thiết kế hướng tới sự an toàn, đơn giản và có thể mở rộng.

- 2. Cấu trúc chương trình
2.1. Các thành phần chính
main.cpp: Giao diện dòng lệnh chính để người dùng tương tác với hệ thống.
auth.h: auth.cpp: Xử lý logic xác thực người dùng, đăng ký, đăng nhập, OTP, đổi mật khẩu, ví, giao dịch, v.v.
user.h: Định nghĩa cấu trúc UserInfo và Role.
README.md: Mô tả tổng quan về hệ thống, chức năng, và cách cài đặt.

- 3. Phân tích chức năng
3.1. Đăng ký người dùng (Auth::registerUser)
Cho phép người dùng đăng ký tài khoản.
Hỗ trợ tạo mật khẩu tự động (tăng bảo mật).
Kiểm tra trùng username.
OTP được tạo và yêu cầu xác thực để kích hoạt tài khoản.
Tự động tạo ví và lịch sử khi đăng ký thành công.
3.2. Kích hoạt tài khoản (Auth::activateAccount)
Dành cho người chưa kích hoạt lúc đăng ký.
OTP cần được nhập đúng để tài khoản được kích hoạt.
3.3. Đăng nhập người dùng (Auth::loginUser)
Xác thực thông tin bằng mật khẩu (đã hash).
Kiểm tra trạng thái kích hoạt.
Nếu đăng nhập bằng mật khẩu tự sinh thì yêu cầu đổi ngay.
3.4. Đổi mật khẩu (Auth::changePassword)
OTP bắt buộc để đảm bảo chính chủ.
Cập nhật mật khẩu mới và xóa trạng thái isAutoGeneratedPassword.
3.5. Chuyển điểm (Auth::transferPoints)
Cho phép chuyển điểm từ ví người này sang người khác.
OTP xác thực giao dịch.
Cập nhật số dư cho cả người gửi và người nhận.
Ghi lại lịch sử giao dịch vào file history.
3.6. Xem lịch sử giao dịch & số dư
Hiển thị tất cả giao dịch của người dùng hiện tại.
Cho phép xem số dư hiện tại trong ví.
- 4. Các cơ chế bảo mật
OTP (One-Time Password): Áp dụng cho đăng ký, kích hoạt, đổi mật khẩu, chuyển điểm.
Hash mật khẩu: Dùng thuật toán đơn giản (dịch ký tự +1) — nên nâng cấp thành SHA256 hoặc tương đương cho thực tế.
Mật khẩu tự sinh: Gồm ký tự đặc biệt, viết hoa, số; giúp tăng cường bảo mật.
---

## Cách tải và dịch chương trình

### Yêu cầu hệ thống
- Hệ điều hành: Windows/Linux/MacOS (có trình biên dịch C++).
- Trình biên dịch: g++ (hoặc bất kỳ compiler C++11 trở lên).
- Không cần thư viện ngoài, chỉ dùng STL C++.

### Tải chương trình
1. Clone từ GitHub (giả sử bọn mình dùng Git):
   ```bash
   git clone https://github.com/username/electronic-wallet-system.git
   cd electronic-wallet-system





